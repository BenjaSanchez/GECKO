# Config file for automatic testing at travis-ci.org
# This file will be regenerated if you run travis_pypi_setup.py

language: python
sudo: false

git:
  depth: 2

cache:
  pip: true

branches:
  only:
    - master
    - devel
    - "/v\\d+\\.\\d+/"

matrix:
  fast_finish: true
  include:
    - os: linux
      python: 3.5
      env:
        - TOXENV=flake8
    - os: linux
      python: 2.7
      env:
        - TOXENV=py27
    - os: linux
      python: 3.4
      env:
        - TOXENV=py34
    - os: linux
      python: 3.5
      env:
        - TOXENV=py35
    - os: linux
      python: 3.6
      env:
        - TOXENV=py36
    - os: osx
      language: generic
      env:
        - TOXENV=py27
    - os: osx
      language: generic
      env:
        - TOXENV=py36


# command to install dependencies, e.g. pip install -r requirements.txt --use-mirrors
install:
  - cd geckopy
  - make copy-models
  - bash ci/travis/setup.sh

# command to run tests
script:
  - travis_wait tox -e "${TOXENV}"

notifications:
  email:
    on_success: never
    on_failure: always

deploy:
  provider: pypi
  distributions: sdist bdist_wheel
  user: BenjaSanchez
  password:
    secure: "CnHU3jDimfpFY/9WI/I1QSNHC9sYsmgRIsN3gS2hjrNi345C5mPH0LV2LizyF5oopyyOWcd+KMAfHbe8WgxV6dsR5w3f9oT3WqY00xcCNAZNEnUfw/TzIoL+cWmQNlIXi6pPIhiYFMMeBN3cnWjU347Zci1mF0fcnrJ1EcPTKYv1ePicQ0StbWa3aWNjduOxDz555Dspt53m1AhQadHuQ+MEdJESa0rFGyUDKhcLaOKwEXkcrA5rV41bNwGFzGddFueagx+CGkcDQ9KRpoPD0fPPiafc4jnTQTSftXNZi16s3VdT1PuM5DCINwnlMdAtdDpVszXcP7ZxolHK3caBOalHJKqGBWP9NzCqbL987kx4unBA4Sk5YY9NWTY6UG+Q8UllDMjTU93PPBsZ/m/hgHcSe/a5NgfmaHhxmNgA2LdxJ+AvYLnEP372hvJWrdYiayB7xmQ5FXDC5Ag5EE5RtZft/bDQvQdN1dHifmplhcNyRw+vI7VxYQ3qQqXZlCpOzMZ5Q2nPWSv5T4PHPejjhqpwj/GnaXPvj1/+VzoNc8fnPD7npv9yGs6gOZSZENzqPbac6AS7pvQDYgRolYfcj6iGeEV/DoCvx9UGkPNtV1hlBKwGrp4lUcaZwNITtOlk5Al263fwwh2coJa/V7QjFUIc2VzhtR9TeEiOC2xKSyI="
  on:
    tags: true
    branch: master
    repo: SysBioChalmers/GECKO
    condition: $TRAVIS_PYTHON_VERSION == "3.6"